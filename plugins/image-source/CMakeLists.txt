cmake_minimum_required(VERSION 3.16...3.25)

legacy_check()

add_library(image-source MODULE)
add_library(OBS::image-source ALIAS image-source)

target_sources(image-source PRIVATE color-source.c image-source.c obs-slideshow.c)

target_link_libraries(image-source PRIVATE OBS::libobs)

if(OS_WINDOWS)
  target_link_libraries(image-source PRIVATE OBS::w32-pthreads)

  configure_file(cmake/windows/obs-module.rc.in image-source.rc)
  target_sources(image-source PRIVATE image-source.rc)
endif()

set_target_properties_obs(image-source PROPERTIES FOLDER plugins PREFIX "")
